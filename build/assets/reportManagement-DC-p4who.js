import{r as n,j as e}from"./index-CVUYYVE8.js";import{A as v}from"./appointmentAPI-A7dzQjpv.js";import{C as j,a as p,b as a,c as r,d as u,e as t}from"./CTable-vZ4THi91.js";import{a as C}from"./index.esm-BKhNcLRy.js";const A=()=>{const[o,m]=n.useState([]),[b,i]=n.useState(!0),[c,f]=n.useState([]),[d,g]=n.useState([]),S=async s=>{console.log("Hospital ID from localStorage:",s);try{const l=await v();console.log("All Appointments:",l),i(!1),f(l.data),console.log(l.data)}catch(l){i(!1),console.error("Failed to fetch appointments:",l)}},h="pending";return n.useEffect(()=>{const s=c.filter(l=>{var x;return((x=l.status)==null?void 0:x.toLowerCase().trim())===h.toLowerCase().trim()});m(s)},[c,h]),n.useEffect(()=>{const s=localStorage.getItem("HospitalId");s?S(s):console.warn("No HospitalId in localStorage")},[]),e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsxs("div",{className:"container mt-4",children:[e.jsx("h5",{className:"mb-3",children:"Appointments"}),e.jsxs(j,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(p,{children:e.jsxs(a,{children:[e.jsx(r,{children:"S.No"}),e.jsx(r,{children:"H_ID"}),e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Service"}),e.jsx(r,{children:"Consultation Type"}),e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Time"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Action"})]})}),e.jsx(u,{children:Array.isArray(o)&&o.length>0?o.map((s,l)=>e.jsxs(a,{children:[e.jsx(t,{children:l+1}),e.jsx(t,{children:s.id}),e.jsx(t,{children:s.name}),e.jsx(t,{children:s.servicename}),e.jsx(t,{children:s.consultationType}),e.jsxs(t,{children:[s.sele?`${s.sele} `:"",s.serviceDate]}),e.jsx(t,{children:s.slot||s.servicetime}),e.jsx(t,{children:s.bookedStatus}),e.jsx(t,{children:e.jsx(C,{color:"primary",size:"sm",onClick:()=>g(s),children:"View"})})]},`${s.id} -${l}`)):e.jsx(a,{children:e.jsx(t,{colSpan:"8",className:"text-center text-danger fw-bold",children:"No appointments found."})})})]})]}),d&&e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("h5",{children:"Report Details"}),e.jsxs(j,{bordered:!0,responsive:!0,children:[e.jsx(p,{children:e.jsxs(a,{children:[e.jsx(r,{children:"ID"}),e.jsx(r,{children:"Name "}),e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Type"}),e.jsx(r,{children:"File"})]})}),e.jsx(u,{children:e.jsx(a,{children:e.jsx(t,{children:d.reportId})})})]})]})]})};export{A as default};
