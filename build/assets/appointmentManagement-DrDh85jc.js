import{r as s,_ as J,t as l,a as P,c as N,P as r,i as K,j as e}from"./index-CcJbILmu.js";import{G as Q}from"./appointmentAPI-CjtfJuXi.js";import{C as M,a as G}from"./CFormLabel-BsqgI5zZ.js";import{u as U}from"./CConditionalPortal-D6H4NGoC.js";import{a as O}from"./index.esm-BTMFzDO6.js";import{C as W,a as X,b as B,c as m,d as Y,e as d}from"./CTable-DhXc9Qy0.js";var I=s.forwardRef(function(a,L){var V=a.className,i=a.button,H=a.feedback,D=a.feedbackInvalid,h=a.feedbackValid,R=a.floatingLabel,z=a.tooltipFeedback,w=a.hitArea,v=a.id,k=a.indeterminate,b=a.inline,C=a.invalid,o=a.label,j=a.reverse,c=a.type,y=c===void 0?"checkbox":c,u=a.valid,T=J(a,["className","button","feedback","feedbackInvalid","feedbackValid","floatingLabel","tooltipFeedback","hitArea","id","indeterminate","inline","invalid","label","reverse","type","valid"]),f=s.useRef(null),$=U(L,f);s.useEffect(function(){f.current&&k&&(f.current.indeterminate=k)},[k,f.current]);var g=function(){return l.createElement("input",P({type:y,className:N(i?"btn-check":"form-check-input",{"is-invalid":C,"is-valid":u,"me-2":w}),id:v},T,{ref:$}))},S=function(){return l.createElement(G,{describedby:T["aria-describedby"],feedback:H,feedbackInvalid:D,feedbackValid:h,floatingLabel:R,invalid:C,tooltipFeedback:z,valid:u})},x=function(){var t;return l.createElement(M,P({customClassName:N(i?N("btn",i.variant?"btn-".concat(i.variant,"-").concat(i.color):"btn-".concat(i.color),(t={},t["btn-".concat(i.size)]=i.size,t),"".concat(i.shape)):"form-check-label")},v&&{htmlFor:v}),o)},E=function(){return i?l.createElement(l.Fragment,null,l.createElement(g,null),o&&l.createElement(x,null),l.createElement(S,null)):o?w?l.createElement(l.Fragment,null,l.createElement(g,null),l.createElement(M,P({customClassName:N("form-check-label stretched-link",V)},v&&{htmlFor:v}),o),l.createElement(S,null)):l.createElement("div",{className:N("form-check",{"form-check-inline":b,"form-check-reverse":j,"is-invalid":C,"is-valid":u},V)},l.createElement(g,null),l.createElement(x,null),l.createElement(S,null)):l.createElement(g,null)};return l.createElement(E,null)});I.propTypes=P({button:r.object,className:r.string,hitArea:r.oneOf(["full"]),id:r.string,indeterminate:r.bool,inline:r.bool,label:r.oneOfType([r.string,r.node]),reverse:r.bool,type:r.oneOf(["checkbox","radio"])},G.propTypes);I.displayName="CFormCheck";const ae=()=>{const[a,L]=s.useState(null),[V,i]=s.useState([]),[H,D]=s.useState([]),[h,R]=s.useState([]),[z,w]=s.useState([]),[v,k]=s.useState([]),[b,C]=s.useState([]),[o,j]=s.useState([]),[c,y]=s.useState([]),[u,T]=s.useState(1),f=7,$=K(),g=async t=>{console.log("Hospital ID from localStorage:",t);try{const n=await Q(t);console.log("All Appointments:",n),C(n.data)}catch(n){console.error("Failed to fetch appointments:",n)}};s.useEffect(()=>{const t=localStorage.getItem("HospitalId");t?g(t):console.warn("No HospitalId in localStorage")},[]),s.useEffect(()=>{let t=[...b];console.log("Initial bookings:",t);const n=p=>p==null?void 0:p.toLowerCase().trim(),F={"Service & Treatment":"service & treatment","Video Consultation":"online","In-clinic":"in-clinic"};if(c.length>0&&(t=t.filter(p=>c.some(A=>n(A)===n(p.status))),console.log("After status filter:",t)),o.length===1){const p=o[0],A=F[p];A&&(t=t.filter(q=>n(q.consultationType)===A),console.log(`After ${p} filter:`,t))}R(t),T(1)},[b,o,c]),s.useEffect(()=>{const t=[...new Set(b.map(F=>F.servicename).filter(Boolean))],n=[...new Set(b.map(F=>F.consultationType).filter(Boolean))];w(t),k(n),console.log("Available Consultation Types:",n)},[b]),s.useEffect(()=>{window.scrollTo(0,0)},[u]);const S=h.slice((u-1)*f,u*f),x=t=>{o.includes(t)?j([]):j([t])},E=t=>{const n=t.target.value;c.includes(n)?y([]):y([n])};return e.jsx("div",{style:{overflow:"hidden"},children:e.jsxs("div",{className:"container mt-4",children:[e.jsx("h5",{children:"Appointments"}),e.jsxs("div",{className:"d-flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>x("Service & Treatment"),className:`btn ${o.includes("Service & Treatment")?"btn-dark":"btn-outline-dark"}`,children:"Service & Treatment"}),e.jsx("button",{onClick:()=>x("In-clinic"),className:`btn ${o.includes("In-clinic")?"btn-dark":"btn-outline-dark"}`,children:"In-Clinic"}),e.jsx("button",{onClick:()=>x("Video Consultation"),className:`btn ${o.includes("Video Consultation")?"btn-dark":"btn-outline-dark"}`,children:"Video Consultation"})]}),e.jsxs("div",{className:"mb-3 d-flex justify-content-between align-items-center flex-wrap gap-2",children:[e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[e.jsx(I,{label:"Pending",value:"Pending",onChange:E,checked:c.includes("Pending")}),e.jsx(I,{label:"In-Progress",value:"In-Progress",onChange:E,checked:c.includes("In-Progress")}),e.jsx(I,{label:"Completed",value:"Completed",onChange:E,checked:c.includes("Completed")})]}),e.jsx(O,{color:"secondary",onClick:()=>{i([]),D([]),j([]),y([])},children:"Reset Filters"})]}),e.jsxs(W,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(X,{children:e.jsxs(B,{children:[e.jsx(m,{children:"S.No"}),e.jsx(m,{children:"H_ID"}),e.jsx(m,{children:"Name"}),e.jsx(m,{children:"Service"}),e.jsx(m,{children:"Consultation Type"}),e.jsx(m,{children:"Date"}),e.jsx(m,{children:"Time"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Action"})]})}),e.jsx(Y,{children:Array.isArray(h)&&h.length>0?S.map((t,n)=>e.jsxs(B,{children:[e.jsx(d,{children:n+1}),e.jsx(d,{children:t.clinicId}),e.jsx(d,{children:t.name}),e.jsx(d,{children:t.servicename}),e.jsx(d,{children:t.consultationType}),e.jsxs(d,{children:[t.sele?`${t.sele} `:"",t.serviceDate]}),e.jsx(d,{children:t.slot||t.servicetime}),e.jsx(d,{children:t.status}),e.jsx(d,{children:e.jsx(O,{color:"primary",size:"sm",onClick:()=>$(`/appointmentDetails/${t.bookingId}`,{state:{appointment:t}}),children:"View"})})]},`${t.id} -${n}`)):e.jsx(B,{children:e.jsx(d,{colSpan:"8",className:"text-center text-danger fw-bold",children:"No appointments found."})})})]}),e.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end"},children:Array.from({length:Math.ceil(h.length/f)},(t,n)=>e.jsx("button",{onClick:()=>T(n+1),style:{margin:"0 5px",padding:"5px 10px",backgroundColor:u===n+1?"#007bff":"#fff",color:u===n+1?"#fff":"#000",border:"1px solid #ccc",borderRadius:"5px"},children:n+1},n))})]})})};export{ae as default};
